{"version":3,"sources":["src/util/RangeMapper.js","src/components/Canvas/Canvas.js","src/components/Regression/Regression.js","node_modules/dat.gui/build/dat.gui.module.js","index.js"],"names":["mapper","tmin","tmax","fmin","fmax","x","drawLineWithColor","x1","line","y1","x2","y2","ctx","strokeStyle","color","beginPath","moveTo","lineTo","stroke","drawDot","y","fillStyle","fg","arc","Math","PI","fill","clearCanvas","w","h","clearRect","random","channel","C","increasing","R","B","G","drawPath","xs","ys","lineWidth","i","length","xc","yc","quadraticCurveTo","canvasOf","canvas","bg","width","window","innerWidth","height","innerHeight","getContext","drawLine","clearLine","clear","canvasById","document","getElementById","canvasId","canvasByClass","getElementByClass","canvasClass","generateWights","weights","n","push","tf","variable","scalar","disposeOfWeights","dispose","Regression","gui","denormalizeX","denormalizeY","isClicked","data","labels","trainOptimizers","SGD","train","sgd","Momentum","lr","m","momentum","Adagrad","adagrad","ADADELTA","adadelta","Adam","adam","Adamax","adamax","RMSProp","rmsprop","control","learningRate","degree","optimizer","setOptimizer","add","step","name","onChange","Object","keys","curTf","tensor1d","pow","mul","pred","label","sub","square","mean","minimize","loss","predict","then","map","___$insertStyle","css","style","createElement","setAttribute","innerHTML","head","appendChild","colorToString","forceCSSHex","colorFormat","__state","conversionName","toString","r","round","g","b","a","s","toFixed","v","str","hex","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","BREAK","extend","target","each","call","arguments","obj","isObject","key","isUndefined","bind","defaults","compose","toCall","args","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","undefined","isNull","isNaN","_isNaN","_x","isArray","constructor","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","recalculateRGB","set","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","clientY","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","NumberController","_params","__min","__max","__step","__impliedStep","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","hueGradient","outline","textAlign","fontWeight","textShadow","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginLeft","marginTop","vendors","vendor","cssText","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","show","webkitTransform","layout","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","preset","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","getRoot","setPresetSelectIndex","revert","setWidth","titleRowName","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","_titleRowName","createTextNode","titleRow","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","_add","factoryArgs","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","removeListeners","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","addSaveMenu","remembered","getCurrentPreset","save","markPresetModified","saveAs","presetName","addPresetOption","recallSavedValue","listen","updateDisplays","newDom","liBefore","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","before","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","matchedIndex","controllerMap","presetMap","concat","container","location","setSelected","showHideExplain","explain","div","firstChild","gears","button","button2","button3","select","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","pmouseX","drag","dragStop","dragStart","useInitialValues","savedValues","controllerArray","math","controllers","dom$1","GUI$1","dat","require","normalizeX","normalizeY","clicked","regression","setInterval","tidy","trainAndDraw","addPosition","pushSample"],"mappings":"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","file":"PolyRegJS.c2ecb914.map","sourceRoot":"..","sourcesContent":["// from a range -> to another range\nexport const mapper = (tmin, tmax) => (fmin, fmax) => (x) =>\n    (((x-fmin)*(tmax-tmin))/(fmax-fmin)) + tmin;\n","const drawLineWithColor =  ctx => color => line => {\n    const {x1, y1, x2, y2} = line;\n    ctx.strokeStyle=color;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n};\n\nconst drawDot = ctx => fg => (x, y) => {\n    ctx.fillStyle=fg;\n    ctx.beginPath();\n    ctx.arc(x, y, 3, 0, 2 * Math.PI);\n    ctx.fill();\n};\n\nconst clearCanvas = ctx => (w, h) => () => ctx.clearRect(0, 0, w, h);\n\nconst random = (x=256) => Math.random() * x;\n\nconst channel = (x) => {\n  let C = random();\n  let increasing = true;\n\n  return () => {\n    C += (increasing ? x : -x);\n\n    if (C >= 255) {\n      C = 255;\n      increasing = false;\n    } else if (C <= 0) {\n      C = 0;\n      increasing = true;\n    }\n\n    return C;\n  }\n}\n\nlet R = channel(0.1), B = channel(0.3), G = channel(0.5);\nconst drawPath = (ctx) => (color) => (xs, ys) => {\n  ctx.strokeStyle=`rgba(${R()}, ${B()}, ${G()}, 1)`;\n  ctx.lineWidth= 2;\n  // move to the first point\n   ctx.moveTo(xs[0], ys[0]);\n\n   //credit: https://stackoverflow.com/questions/7054272/how-to-draw-smooth-curve-through-n-points-using-javascript-html5-canvas\n   let i;\n   for (i = 0; i < xs.length - 2; i ++) {\n      var xc = (xs[i] + xs[i + 1]) / 2;\n      var yc = (ys[i] + ys[i + 1]) / 2;\n      ctx.quadraticCurveTo(xs[i], ys[i], xc, yc);\n   }\n   // curve through the last two points\n   ctx.quadraticCurveTo(xs[i], ys[i], xs[i+1], ys[i+1]);\n   ctx.stroke();\n}\n\n\nconst canvasOf = (canvas, fg='white', bg='black') => {\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n  const ctx = canvas.getContext(\"2d\");\n  const w = canvas.width, h = canvas.height;\n\n  return {\n    canvas: () => canvas,\n    width: w,\n    height: h,\n    drawDot: drawDot(ctx)(fg),\n    drawLine: drawLineWithColor(ctx)(fg),\n    drawPath: drawPath(ctx)(fg),\n    clearLine: drawLineWithColor(ctx)(bg),\n    clear: clearCanvas(ctx)(w, h)\n  };\n};\n\nexport const canvasById =\n  canvasId => canvasOf(document.getElementById(canvasId));\nexport const canvasByClass =\n  canvasClass => canvasOf(document.getElementByClass(canvasClass));\n","const random = (x) => Math.random() * x;\n\nconst generateWights = n => {\n  const weights = [];\n  for (let i = 0; i < n; i++)\n    weights.push(tf.variable(tf.scalar(random(1))));\n\n  return weights;\n}\n\nconst disposeOfWeights = weights => {\n  for (let i = 0; i < weights.length; i++)\n    tf.dispose(weights[i]);\n};\n\nclass Regression {\n  constructor(gui, denormalizeX, denormalizeY, canvas, isClicked) {\n    this.canvas = canvas;\n\n    this.denormalizeX = denormalizeX;\n    this.denormalizeY = denormalizeY;\n\n    this.data = [];\n    this.labels = [];\n\n    const trainOptimizers = {\n      SGD: () => tf.train.sgd,\n      Momentum: () => (lr, m=0) => tf.train.momentum(lr, m),\n      Adagrad: () => tf.train.adagrad,\n      ADADELTA: () => tf.train.adadelta,\n      Adam: () => tf.train.adam,\n      Adamax: () => tf.train.adamax,\n      RMSProp: () => tf.train.rmsprop\n    }\n\n    const control = {\n      learningRate: 0.3,\n      degree: 3,\n      optimizer: 'SGD'\n    };\n\n    this.weights = generateWights(control.degree+1);\n    const setOptimizer =\n      () => trainOptimizers[control.optimizer]()(control.learningRate);\n    this.optimizer = setOptimizer();\n    this.isClicked = isClicked;\n\n    gui.add(control, 'learningRate', 0, 1)\n       .step(0.01)\n       .name('Learning Rate')\n       .onChange(() => this.optimizer = tf.train.adam(control.learningRate));\n\n    gui.add(control, 'degree', 1, 20)\n       .step(1)\n       .name('Degree')\n       .onChange(() => {\n         disposeOfWeights(this.weights);\n         this.weights = generateWights(control.degree+1);\n       });\n\n    gui.add(control, 'optimizer', Object.keys(trainOptimizers))\n       .name('Optimizer')\n       .onChange(setOptimizer);\n\n    // gui.close()\n  }\n\n  predict(xs) {\n    const weights = this.weights;\n\n    let curTf = weights[0];\n    for (var i = weights.length-1; i > 0; i--)\n      curTf = tf.tensor1d(xs).pow(i).mul(weights[i]).add(curTf);\n\n    return curTf;\n  }\n\n  loss(pred, label) { return pred.sub(label).square().mean(); }\n\n  trainAndDraw() {\n      const n = this.data.length;\n      if (n < 1) return;\n      this.canvas.clear();\n\n      if (!this.isClicked()) {\n        this.optimizer.minimize(\n            () => this.loss(this.predict(this.data), tf.tensor1d(this.labels)));\n\n        const xs = [];\n        for (let i = -1.0; i <= 1.0; i+=0.1)\n          xs.push(i);\n\n        this.predict(xs)\n            .data()\n            .then(ys => this.canvas.drawPath(xs.map(this.denormalizeX),\n                                             ys.map(this.denormalizeY)));\n      }\n      for (let i = 0; i < n; i++)\n        this.canvas.drawDot(this.denormalizeX(this.data[i]),\n                            this.denormalizeY(this.labels[i]));\n  }\n\n  pushSample(x, y) {\n    this.data.push(x);\n    this.labels.push(y);\n  }\n}\n\nexport default Regression;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n    _this2.__saturation_field.appendChild(valueField);\n    _this2.__selector.appendChild(_this2.__field_knob);\n    _this2.__selector.appendChild(_this2.__saturation_field);\n    _this2.__selector.appendChild(_this2.__hue_field);\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n    _this2.domElement.appendChild(_this2.__input);\n    _this2.domElement.appendChild(_this2.__selector);\n    _this2.updateDisplay();\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n      _this.__color.v = v;\n      _this.__color.s = s;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n      _this.__color.h = h * 360;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    return _this2;\n  }\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n      var _flip = 255 - flip;\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRowName) {\n          titleRowName.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    params.closed = false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var _titleRowName = document.createTextNode(params.name);\n    dom.addClass(_titleRowName, 'controller-name');\n    var titleRow = addRow(_this, _titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller,                                   {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","\nimport {mapper} from './src/util/RangeMapper';\nimport {canvasById} from './src/components/Canvas/Canvas';\nimport Regression from './src/components/Regression/Regression';\n\nconst dat = require('dat.gui');\n\nconst gui = new dat.GUI();\n\nconst canvas = canvasById(\"myCanvas\");\nconst w = canvas.width, h = canvas.height;\n\nconst normalizeX = mapper(-1, 1)(0, w);\nconst normalizeY = mapper(-1, 1)(h, 0);\nconst denormalizeX = x => Math.floor(mapper(0, w)(-1, 1)(x));\nconst denormalizeY = y => Math.floor(mapper(h, 0)(-1, 1)(y));\nlet clicked = false;\nconst isClicked = () => clicked;\n\n\nconst regression =\n  new Regression(gui, denormalizeX, denormalizeY, canvas, isClicked);\nsetInterval(() => tf.tidy(() => regression.trainAndDraw()), 0);\n\nconst addPosition = e => regression.pushSample(normalizeX(e.clientX),\n                                               normalizeY(e.clientY));\n\nwindow.addEventListener(\"click\", addPosition, false);\n\ncanvas.canvas()\n  .addEventListener('mousemove', e => {if (clicked) addPosition(e);}, false);\ncanvas.canvas().addEventListener('mousedown', e => clicked = true, false);\ncanvas.canvas().addEventListener('mouseup', e => clicked = false, false);\n"]}